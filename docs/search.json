[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Chocolate Bar Ratings",
    "section": "",
    "text": "1 Introduction\nThis project aims to perform exploratory data analysis (EDA) on the Chocolate Rating Dataset and bring insight to answer questions as per below:\nSource data can be accessible via clickable link below.\n#clickable link \ndf &lt;- data.frame(\n  Name = c(\"Kaggle\", \"Github\"),\n  Link = c('&lt;a href =\"https://www.kaggle.com/datasets/rtatman/chocolate-bar-ratings/data\" target =\"_blank\"&gt;Click&lt;/a&gt;',\n           '&lt;a href =\"https://jianyuan941.github.io/Chocolate-Bar-Ratings\" target= \"_blank\"&gt;Click&lt;/a&gt;')\n)  \n  kable(df, escape = F)\n\n\n\n\n\n\n\n\nName\nLink\n\n\n\n\nKaggle\nClick\n\n\nGithub\nClick",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#data-manipulation",
    "href": "index.html#data-manipulation",
    "title": "Chocolate Bar Ratings",
    "section": "2.1 Data Manipulation",
    "text": "2.1 Data Manipulation\n\nflavors_of_cacao_without_na &lt;- \nflavors_of_cacao_without_na %&gt;% \n  mutate( companylocation = case_when(\n          companylocation == \"U.S.A.\" ~ \"United States of America\",\n          companylocation == \"U.K.\" ~ \"United Kingdom\",\n          companylocation == \"Scotland\" ~ \"United Kingdom\",\n          companylocation == \"Amsterdam\" ~ \"Netherlands\",\n          companylocation == \"Sao Tome\" ~ \"São Tomé and Principe\",\n          companylocation == \"Czech Republic\" ~ \"Czechia\",\n          companylocation == \"Eucador\" ~ \"Ecuador\",\n          T ~ companylocation\n        ),\n        beantype = case_when(\n          str_detect(beantype, regex(\"Criollo, Trinitario|Trinitario, Criollo|Trinitario, Forastero|Criollo, +|Amazon, ICS|Blend-Forastero,Criollo|Criollo, Forastero|Amazon mix|Forastero, Trinitario|Trinitario, TCGA|Trinitario, Nacional\" ,ignore_case = T)) ~ \"Blend\",\n          str_detect(beantype, regex(\"Forastero|CCN51|Matina\", ignore_case = T)) ~\"Forastero\",\n          str_detect(beantype, regex(\"criollo\", ignore_case = T)) ~ \"Criollo\",\n          str_detect(beantype, regex(\"Nacional|EET\", ignore_case = T)) ~ \"Nacional\",\n          str_detect(beantype, regex(\"Trinitario\", ignore_case = T)) ~ \"Trinitario\",\n          TRUE ~ beantype \n        ),\n        cocoapercent = as.double(gsub(\"\\\\%\",\"\",cocoapercent))/100\n         )\n\nIn the data manipulation, adjustment is conducted to standardized, categoried and removed noises which potentially misleading the final result.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#first-insight-overall-rating-distribution",
    "href": "index.html#first-insight-overall-rating-distribution",
    "title": "Chocolate Bar Ratings",
    "section": "2.2 First Insight: Overall Rating Distribution",
    "text": "2.2 First Insight: Overall Rating Distribution\n\nAverage Rating DistributionRating Distribution Over Years\n\n\n\nbreak_generator(\n  breaks_name = \"score_break\",\n  labels_name = \"score_label\",\n  start = 0,\n  end = 5,\n  gap = 1\n)\n\n\n#overall review on score\nplot_for_rating_distribution&lt;-\nflavors_of_cacao_without_na %&gt;% \n  select(companymakerifknown, rating) %&gt;% \n  group_by(companymakerifknown) %&gt;% \n  \n  #remove duplicated company to avoid flooding specific rating\n  summarise(avg_rating = mean(rating), .groups = \"drop\") %&gt;% \n  mutate(score_group = cut(avg_rating,\n                           breaks = score_break,\n                           labels = score_label,\n                           right = F,\n                             ordered_result = T),\n  score_group = case_when(\n            avg_rating == \"5\" ~ \"4-5\",\n            T ~ score_group\n           )) %&gt;% \n  \n  #evaluate only avrage rating for every company\n  group_by(score_group) %&gt;% \n  summarise(total_count = n(), .groups = \"drop\")\n\nbarchart_plotly(\n  database = plot_for_rating_distribution,\n  x_col = score_group,\n  y_col = total_count,\n  fill_col = score_group,\n) %&gt;% layout(\n  title = \"Average Rating Distribution For Chocolate\",\n  xaxis = list(title = \"Score Group\"),\n  yaxis = list(title = \"Count\")\n)\n\n\n\n\n\n\n\n\nRating Distribution in Percentage\n\n\nscore_group\n2-3\n3-4\n4-5\n\n\ntotal_count\n79\n202\n1\n\n\npercentage\n28.01%\n71.63%\n0.35%\n\n\n\n\n\nThe bar chart above illustrates the average rating of every company throughout the years. Average rating is centralized in score group 3-4 (equal to 202 companies and 71.63% of sample size), followed by 2-3 (79, 28.01%) and lastly 4-5 (1, 0.35%). It gives insights that:\n\nChocolate Manufacturer have at least score 3-4 in rating to remain competitive in the market.\nThe market tends to award favourable ratings.\n\n\n\n\nchanges_of_rating_over_years &lt;-\nflavors_of_cacao_without_na %&gt;% \n  #find average rating per company per year\n  select(companymakerifknown, reviewdate, rating) %&gt;% \n  group_by(companymakerifknown, reviewdate) %&gt;% \n  #to prevent same company evaluate twice within that year\n  summarise(avg_rating = mean(rating), .groups = \"drop\") %&gt;% \n  #to group score into factors by years\n    mutate(score_group = cut(avg_rating,\n                           breaks = score_break,\n                           labels = score_label,\n                           right = F,\n                           ordered_result = T),\nscore_group = case_when(\n          avg_rating == \"5\" ~ \"4-5\",\n          T ~ score_group\n         )) %&gt;% \n  select(reviewdate, score_group) %&gt;% \n  group_by(reviewdate, score_group) %&gt;% \n  summarise(total_count = n(), .groups = \"drop\") \n\n\n#generate group for years\nyear_group &lt;- unique(changes_of_rating_over_years$reviewdate)\n\nbarchart_plotly(\n  database = changes_of_rating_over_years,\n  x_col = score_group,\n  y_col = total_count,\n  text_col = total_count,\n  matched_group_col = reviewdate,\n  ordered_group = year_group\n) %&gt;% button_generator(\n  ordered_group = year_group,\n  num_of_plot = 1\n) %&gt;% \n  layout(\n  title = \"Distribution of Rating Over Years\",\n  xaxis = list(title = \"score Group\"),\n  yaxis = list(title = \"Count\")\n)\n\n\n\n\n\nRatings are reorganized to examine changes from 2006 to 2017. The bar chart above shows a marked rise in the 3–4 score group over time, followed by the 2–3 score group, which displays a fluctuating trend. The 1–2 and 4–5 score groups appear as extremes: companies in the 1–2 score group improve to remain competitive in the market, while the 4–5 score group is reserved for only the very best chocolate manufacturers.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#second-insight-distribution-by-country",
    "href": "index.html#second-insight-distribution-by-country",
    "title": "Chocolate Bar Ratings",
    "section": "2.3 Second Insight: Distribution by Country",
    "text": "2.3 Second Insight: Distribution by Country\n\nDistribution of Chocolate Manufacturer by CountryManufacturers And Average Ratings by Country\n\n\n\nflavors_of_cacao_without_na_group_by_country &lt;- \nflavors_of_cacao_without_na %&gt;% \n  # find average rating per company per year\n  select(companymakerifknown, rating, companylocation) %&gt;% \n  # calculate average rating for company \n  group_by(companymakerifknown, companylocation) %&gt;% \n  summarise(avg_rating = mean(rating), .groups = \"drop\") %&gt;% \n  select(-companymakerifknown) %&gt;% \n  # Distribution Rating and Count to Country\n  group_by(companylocation) %&gt;% \n  summarise(\n    avg_rating = mean(avg_rating),\n    total_count = n(), .groups = \"drop\")\n\nggplotly(\n  map_function(\n    database = flavors_of_cacao_without_na_group_by_country,\n    assign_name = worldmap_group_by_number_of_company,\n    joinby = companylocation,\n    fill = total_count)+\n    labs(title = \"global map\")+\n    theme_function()\n)\n\nWarning in layer_sf(geom = GeomSf, data = data, mapping = mapping, stat = stat,\n: Ignoring unknown aesthetics: text\n\n\n\n\n\n\nThe map above shows the distribution of chocolate manufacturers across countries. Lighter colors represent larger numbers, while darker colors represent smaller numbers.\n\n\n\ncountry_group &lt;- unique(flavors_of_cacao_without_na_group_by_country$companylocation)\nflavors_of_cacao_without_na_group_by_year_and_country&lt;-\nflavors_of_cacao_without_na %&gt;% \n  select(companylocation, rating, reviewdate) %&gt;% \n  group_by(companylocation, reviewdate) %&gt;% \n  summarise(avg_rating = mean(rating), .groups = \"drop\")\n\nf1&lt;- \nflavors_of_cacao_without_na_group_by_country %&gt;% \n  arrange(avg_rating) %&gt;% \n  mutate(companylocation = factor(companylocation, levels = companylocation)) %&gt;% \nbarchart_plotly(\n  database = .,\n  x_col = total_count,\n  y_col = companylocation,\n  text_col = avg_rating,\n  matched_group_col = companylocation,\n  ordered_group = country_group\n) \n\nf2&lt;-\nscatter_plotlyv2(\n  database = flavors_of_cacao_without_na_group_by_year_and_country,\n  x_col = reviewdate,\n  y_col = avg_rating,\n  matched_group_col = companylocation,\n  ordered_group = country_group,\n  display = F\n  #checking = T\n)\n\nsubplot(f1, f2, shareX = F, shareY = F, nrows = 2, heights = c(0.7,0.3))  %&gt;% \n  button_generator(\n    ordered_group = country_group,\n    sec_graph_display = F\n  ) %&gt;% layout(\n    height = 500,\n    margin = list(l = 0),\n    annotations = list(\n      list(text = \"Distribtion of Chocolate Manufacturers and ranked in Ascending\",\n           x = 0.5,\n           y =1.05,\n          xref = \"paper\", \n          yref = \"paper\", \n          showarrow = FALSE,\n          font = list(size = 14)),\n      list(text = \"Average Score by Years\",\n           x = 0.5,\n           y =0.20,\n          xref = \"paper\", \n          yref = \"paper\", \n          showarrow = FALSE,\n          font = list(size = 14))\n      )\n    )\n\nWarning: Specifying width/height in layout() is now deprecated.\nPlease specify in ggplotly() or plot_ly()\n\n\n\n\n\n\n\n\n\nTop 5 Market Players\n\n\ncompanylocation\nUnited States of America\nUnited Kingdom\nFrance\nCanada\nEcuador\n\n\ntotal_count\n118\n19\n16\n11\n11\n\n\nmarket_share\n41.84%\n6.74%\n5.67%\n3.9%\n3.9%\n\n\n\n\n\nThe Figure above combined two type of plots. The Vertical bar chart illustrates the number of chocolate manufacturers by countries and ordered by average rating in descending order, While line chart shows the changes of average rating across the years for each country.\nUSA appears as the main chocolate bar manufacturing country, with 118 companies, equivalent to 41.84% of the total manufacturers. The average ratings for USA remains stable in between 3.0 and 3.4 across the years. United Kingdom, the second-largest market player, holds significantly smaller market shares 6.74% (19 manufacturing companies) as compared to USA.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#third-insight-relationship-of-cacao-bean-and-rating",
    "href": "index.html#third-insight-relationship-of-cacao-bean-and-rating",
    "title": "Chocolate Bar Ratings",
    "section": "2.4 Third Insight: Relationship of Cacao Bean and Rating",
    "text": "2.4 Third Insight: Relationship of Cacao Bean and Rating\n\nRating Distribution by Type of Cacao BeanTSNE Plotting\n\n\n\nflavors_of_cacao_without_na_group_by_beantype &lt;- \nflavors_of_cacao_without_na %&gt;% \n  # calculate average rating base on beantype\n  select(companymakerifknown, beantype, rating) %&gt;% \n  group_by(beantype) %&gt;% \n  mutate(average_rating = round(mean(rating),2)) %&gt;% \n  ungroup() %&gt;%\n  # find only unique company with different beantype\n  select(companymakerifknown, beantype, average_rating) %&gt;% \n  distinct() %&gt;% \n  # summarize total number of company with unique beantype \n  group_by(beantype, average_rating) %&gt;% \n  summarise(total_count = n(), .groups = \"drop\") %&gt;% \n  # sort base on lowerest to highest rating\n  arrange(average_rating) %&gt;% \n  mutate(beantype = factor(beantype, levels = beantype))\n\nbean_group &lt;- as.character(unique(flavors_of_cacao_without_na_group_by_beantype$beantype))\n\nreview_for_bean_per_year &lt;-\nflavors_of_cacao_without_na %&gt;% \n  # group by year and company\n  group_by(reviewdate, beantype) %&gt;% \n  summarise(average_rating = mean(rating), .groups = \"drop\") %&gt;% \n  arrange(reviewdate, beantype)\n\nf&lt;- barchart_plotly(\n  database = flavors_of_cacao_without_na_group_by_beantype,\n  x_col = beantype,\n  y_col = total_count,\n  text_col = average_rating,\n  matched_group_col = beantype,\n  ordered_group = bean_group\n)\n\nf2&lt;- scatter_plotlyv2(\n  database = review_for_bean_per_year,\n  x_col = reviewdate,\n  y_col = average_rating,\n  #text_col = average_rating,\n  matched_group_col = beantype,\n  ordered_group = bean_group,\n  display =F\n  #checking = T\n) \n\n \nsubplot(f, f2, shareX = F, shareY = F, nrows =2) %&gt;% \nbutton_generator(\n    ordered_group = bean_group,\n    sec_graph_display = F\n  ) %&gt;%   \n  layout(\n    title = \"Supply of Bean Type with Average Rating\"\n  )\n\n\n\n\n\n\n\n\nType of Bean with Associate Average Rating\n\n\nbeantype\nTrinitario\nForastero\nCriollo\nBlend\nNacional\nBeniano\nAmazon\n\n\naverage_rating\n3.25\n3.12\n3.27\n3.28\n3.31\n3.58\n3.25\n\n\ntotal_count\n185\n108\n89\n46\n8\n3\n1\n\n\npercentage\n42.05%\n24.55%\n20.23%\n10.45%\n1.82%\n0.68%\n0.23%\n\n\n\n\n\nThe figure above combines a bar chart and a line chart. The bar chart displays the distribution of bean types ordered by average rating, while the line chart shows changes in ratings over the years.\nTrinitario, a hybrid of Forastero and Criollo that inherits disease resistance from Forastero and superior flavor from Criollo (source ), is the most widely used cocoa in the market, accounting for 42.05% of the total with an average rating of 3.25 across the years.\nForastero, the second most commonly used cocoa (24.55% of the market), is favored for its ease of cultivation and high yield (source ). However, its average rating is lower compared to Trinitario.\nCriollo ranks third in usage; although it produces smaller yields, it is valued for its stronger flavor compared to other varieties. Blend (mixed cocoa), Nacional, Amazon, and Beniano varieties serve more niche market segments.\n\n\n\nflavors_of_cacao_without_na %&gt;% \n  select(beantype, cocoapercent, rating) %&gt;% \ntsne_function(\n  database = ., \n  point_to_consider = 100,\n  blur_rate = 0.1,\n  group_col = beantype,\n  show_iteration_msg = F)\n\n\n\n\n\nThe t-SNE plot above illustrates the relationships among cocoa percentage, rating, and bean type. The scatter points for different bean types overlap heavily, suggesting that there are no clear or direct differences between them.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#fourth-insight-relationship-of-cocoa-percentage-and-rating",
    "href": "index.html#fourth-insight-relationship-of-cocoa-percentage-and-rating",
    "title": "Chocolate Bar Ratings",
    "section": "2.5 Fourth Insight: Relationship of Cocoa Percentage and Rating",
    "text": "2.5 Fourth Insight: Relationship of Cocoa Percentage and Rating\n\nCacao Percentage Group and Average Rating by Beantype\n\n\n\nbreak_generator(\n  breaks_name = \"cacao_percentage_break\",\n  labels_name = \"cacao_percentage_label\",\n  start = 0,\n  end = 1,\n  gap = 0.1\n)\n\nsummary_cocoa_percentage &lt;- \nflavors_of_cacao_without_na %&gt;% \n  select(companymakerifknown,rating, cocoapercent, beantype) %&gt;% \n  group_by(companymakerifknown,beantype) %&gt;% \n  summarise(average_rating = mean(rating),\n            average_cocoapercent = mean(cocoapercent),\n            .groups = \"drop\") %&gt;% \n  select(-companymakerifknown) %&gt;% \n  mutate(cocoa_percent_group = cut(average_cocoapercent,\n                                   breaks = cacao_percentage_break,\n                                   labels = cacao_percentage_label,\n                                   ordered_result = T,\n                                   right = F)) %&gt;% \n  select(-average_cocoapercent) %&gt;% \n  group_by(beantype, cocoa_percent_group) %&gt;% \n  summarise(total_count = n(), \n            average_rating = mean(average_rating),.groups = \"drop\") \n  \n  barchart_plotly(\n    database = summary_cocoa_percentage, \n    x_col = cocoa_percent_group,\n    y_col = total_count,\n    matched_group_col = beantype,\n    ordered_group = bean_group,\n    text_col = average_rating\n    ) %&gt;% \n    button_generator(\n      num_of_plot = 1,\n      ordered_group = bean_group\n    ) %&gt;% layout(\n      xaxis = list(title = \"Cocoa Percentage Group\"),\n      yaxis = list(title = \"Total Count\")\n    )\n\n\n\n\n\nFigure above shows the distribution of average rating based on cocoa percentage group by bean type. Inight suggests that high cocoa percentage do not result in high ratings. Distribution across beantype illustrates highest average rating normally laid in between 60 to 80 cocoa percentage.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "index.html#preliminary-screening-for-anova-analysis",
    "href": "index.html#preliminary-screening-for-anova-analysis",
    "title": "Chocolate Bar Ratings",
    "section": "2.6 Preliminary Screening for ANOVA Analysis",
    "text": "2.6 Preliminary Screening for ANOVA Analysis\n\nSample Size AssessmentVisualization and Shapiro Assessment\n\n\n\nflavors_of_cacao_without_na %&gt;% \n  group_by(companymakerifknown, beantype) %&gt;% \n  summarise(average_cocoapercent = mean(cocoapercent), .groups = \"drop\") %&gt;% \n  group_by(beantype) %&gt;% \n  summarise(num_of_user = n(), .groups = \"drop\") %&gt;%\n  arrange(num_of_user) %&gt;%\n  save_function(name = \"sample_size_assessment_result\", type = \"NULL\", return = T) %&gt;% \n  kbl(caption = \"sample size for beantype\") %&gt;%\n  kable_styling()\n\n\nsample size for beantype\n\n\nbeantype\nnum_of_user\n\n\n\n\nAmazon\n1\n\n\nBeniano\n3\n\n\nNacional\n8\n\n\nBlend\n46\n\n\nCriollo\n89\n\n\nForastero\n108\n\n\nTrinitario\n185\n\n\n\n\n\nSample size assessment indicates that Amazon, Beniano, and Nacional have small sample sizes, making them unsuitable for ANOVA testing.\n\n\n\nbean_type &lt;-sample_size_assessment_result$beantype[4:7]\n\nflavors_of_cacao_without_na %&gt;% \n  group_by(companymakerifknown, beantype) %&gt;% \n  summarise(average_rating = mean(rating), .groups = \"drop\") %&gt;% \n  save_function(name =\"sample\", type = \"NULL\", return = T) %&gt;% \nhist_bell_plotly(\n  database = .,\n  x_col = average_rating,\n  bin_size = 0.05,\n  matched_group_col = beantype,\n  ordered_group = bean_type\n) %&gt;% \n  bell_curve_selection_generator(\n    number_of_curve = 8,\n    hist_bell = T\n  ) %&gt;% \n  layout(\n    xaxis = list(title = \"Average Rating\"),\n    yaxis = list(title = \"Density\")\n    \n  )\n\n\n\n\n\n\nshapiro_group_testing(\n  database = sample,\n  matched_group_col = beantype,\n  ordered_group = bean_type,\n  x_col = average_rating\n) %&gt;% \n  kbl(caption = \"Result from shapiro test\") %&gt;% \n  kable_styling()\n\n\nResult from shapiro test\n\n\ngroup\np_value\n\n\n\n\nBlend\n0.0082189\n\n\nCriollo\n0.0100423\n\n\nForastero\n0.0027237\n\n\nTrinitario\n0.0044680\n\n\n\n\n\nThe Shapiro-Wilk test shows that the remaining groups deviate from normality, as their p-values are ≤ 0.05. Visual inspection of the histograms suggests that larger sample sizes could improve the approximation to normality and increase p-values.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  }
]